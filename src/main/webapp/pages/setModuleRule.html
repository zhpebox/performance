<!DOCTYPE html>
<html>
<head>
<title>Generator Data Tools</title>
<link
	href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="http://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css"
	rel="stylesheet">
<script type="text/javascript"
	src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript"
	src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript"
	src="http://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script type="text/javascript"
	src="https://cdn.bootcss.com/vue/2.2.2/vue.min.js"></script>
<script type="text/javascript"
	src="https://cdn.jsdelivr.net/vue.resource/1.3.1/vue-resource.min.js"></script>
<script type="text/javascript"
	src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
</head>
<body>
	<div class="container">
		<div class="row clearfix">
			<div id="DataMuduleDiv2" class="col-md-12 column">
				<div class="row clearfix">
					<div class="col-md-3 column"></div>
					<div class="col-md-6 column">
						<form class="form-horizontal" role="form">
							<div class="form-group">
								<label>模板名称</label> <input type="text" class="form-control"
									v-model="module.moduleName" readonly="true" />
							</div>
							<div class="form-group">
								<label>模板</label>
								<textarea class="form-control" rows="8"
									v-model="module.moduleText" disabled></textarea>
							</div>
							<div class="form-group">
<!-- 								<button v-on:click="add('a-component', 'test')" class="btn btn-primary">Add A</button> -->
								<button @click="add('b-component', 'test')" class="btn btn-primary">Add Params</button>
							</div>
							<div :is="item.component" :texta="item.texta" v-for="item in items"></div>
							<div class="col-md-6 column"></div>
							<div class="col-md-6 column" style="text-align: right">
								<button type="button" v-on:click=""
									class="btn btn-default btn-success">保存</button>
							</div>
						</form>
					</div>
					<div class="col-md-3 column"></div>
				</div>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript">
// 	var AComponent = Vue.extend({
// 	  props: ['text'],
// 	  template: '<li>A Component: {{ text }}</li>'
// 	})
	
	var BComponent = Vue.extend({
	  props: ['texta'],
	  template: `<div class="form-group">
					<div class="col-md-3 column" >
	 						<label>{{ texta }}</label>
					</div>
					<div class="col-md-9 column" >
						<div >
							<select>
						      <option>1</option>
						      <option>2</option>
						      <option>3</option>
						      <option>4</option>
						      <option>5</option>
						    </select>
						</div>
					</div>
				</div>`
	})

	const router = new VueRouter({
		routes:[{
			path:'/:muduleId'
		}]
	})
	
	new Vue({
	  el: '#DataMuduleDiv2',
	  mounted() {
    	  this.getModuleData();
      },
      components: {
//     	    'a-component': AComponent,
    	    'b-component': BComponent,
      },
	  data: {
		  module:{moduleId:'',moduleName:'模板名称',moduleText:'模板内容'},
		  items: [],
		  index: 1
	  },
	  methods:{
		  getModuleData:function(){
			  this.$http({
				  method:'GET',
				  url:'/GeneratorDataWeb/module/get/'+this.$route.params.muduleId+'.do',
				  emulateJSON:true, //允许body带接送传输
					headers: {
						dataType:"json", 
						contentType:"application/json"
              		}
			  }).then(response => {
				  this.module = response.body;
			  },response => {
				  console.log("反馈出现问题！");
			  });
		  },
		  add:function(component, test) {
		      this.items.push({
		        'component': component,
		        'texta': test+this.index++,
		      })
		      console.log(this.items);
		  }
	  },
	  router
	})
// 	.$mount('#DataMuduleDiv')
</script>
</html>